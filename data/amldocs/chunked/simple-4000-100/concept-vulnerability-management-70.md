   * See [Compute Instance release notes](azure-machine-learning-ci-image-release-notes.md) for details on image releases.

1. Alternatively, regularly update OS and Python packages.

   * Use Linux package management tools to update the package list with the latest versions.
     
     ```bash
     sudo apt-get update
     ```
     
   * Use Linux package management tools to upgrade packages to the latest versions. Note that package conflicts might occur using this approach.
     
     ```bash
     sudo apt-get upgrade
     ```
     
   * Use Python package management tools to upgrade packages and check for updates.
     
     ```bash
     pip list --outdated
     ```
     
You may install and run additional scanning software on compute instance to scan for security issues. 
   
* [Trivy](https://github.com/aquasecurity/trivy) may be used to discover OS and Python package level vulnerabilities. 
* [ClamAV](https://www.clamav.net/) may be used to discover malware and comes pre-installed on compute instance.
* Defender for Server agent installation is currently not supported. 
* Consider using [customization scripts](./how-to-customize-compute-instance.md) for automation.

### Compute clusters

Compute clusters automatically upgrade to the latest VM image. If the cluster is configured with min nodes = 0, it automatically upgrades nodes to the latest VM image version when all jobs are completed and the cluster reduces to zero nodes.
* There are conditions in which cluster nodes do not scale down, and as a result are unable to get the latest VM images. 

     * Cluster minimum node count may be set to a value greater than 0.
     * Jobs may be scheduled continuously on your cluster.

* It is your responsibility to scale non-idle cluster nodes down to get the latest OS VM image updates. Azure Machine Learning does not abort any running workloads on compute nodes to issue VM updates. 

     * Temporarily change the minimum nodes to zero and allow the cluster to reduce to zero nodes. 

### Managed online endpoints

* Managed Online Endpoints automatically receive OS host image updates that include vulnerability fixes. The update frequency of images is at least once a month. 
* Compute nodes get automatically upgraded to the latest VM image version once released. There’s no action required on you.  

### Customer managed Kubernetes clusters

[Kubernetes compute](how-to-attach-kubernetes-anywhere.md) lets you configure Kubernetes clusters to train, inference, and manage models in Azure Machine Learning. 
* Because you manage the environment with Kubenetes, both OS VM vulnerabilities and container image vulnerability management is your responsibility.  
* Azure Machine Learning frequently publishes new versions of AzureML extension container images into Microsoft Container Registry. It's Microsoft’s responsibility to ensure new image versions are free from vulnerabilities. Vulnerabilities are fixed with [each release](https://github.com/Azure/AML-Kubernetes/blob/master/docs/release-notes.md).
* When your clusters run jobs without interruption, running jobs may run outdated container image versions. Once you upgrade the amlarc extension to a running cluster, newly submitted jobs will start to use the latest image version. When upgrading the AMLArc extension to its latest version, clean up the old container image versions from the clusters as required. 
* Observability on whether your Azure Arc cluster is running the latest version of AMLArc, you can find via the Azure portal. Under your Arc resource of the type 'Kubernetes - Azure Arc', see 'Extensions' to find the version of the AMLArc extension. 


## Automated ML and Designer environments

For code-based training experiences, you control which Azure Machine Learning environment is used. With AutoML and Designer, the environment is encapsulated as part of the service. These types of jobs can run on computes configured by you, allowing for extra controls such as network isolation.

* Automated ML jobs run on environments that layer on top of Azure ML [base docker images](https://github.com/Azure/AzureML-Containers).
