> Logging uses Azure Log Analytics. If you do not currently have a Log Analytics workspace, you can create one using the steps in [Create a Log Analytics workspace in the Azure portal](../azure-monitor/logs/quick-create-workspace.md#create-a-workspace).

1. In the [Azure portal](https://portal.azure.com), go to the resource group that contains your endpoint and then select the endpoint.
1. From the **Monitoring** section on the left of the page, select **Diagnostic settings** and then **Add settings**.
1. Select the log categories to enable, select **Send to Log Analytics workspace**, and then select the Log Analytics workspace to use. Finally, enter a **Diagnostic setting name** and select **Save**.

    :::image type="content" source="./media/how-to-monitor-online-endpoints/diagnostic-settings.png" alt-text="Screenshot of the diagnostic settings dialog.":::

    > [!IMPORTANT]
    > It may take up to an hour for the connection to the Log Analytics workspace to be enabled. Wait an hour before continuing with the next steps.
    
1. Submit scoring requests to the endpoint. This activity should create entries in the logs.
1. From either the online endpoint properties or the Log Analytics workspace, select **Logs** from the left of the screen.
1. Close the **Queries** dialog that automatically opens, and then double-click the **AmlOnlineEndpointConsoleLog**. If you don't see it, use the **Search** field.

    :::image type="content" source="./media/how-to-monitor-online-endpoints/online-endpoints-log-queries.png" alt-text="Screenshot showing the log queries.":::

1. Select **Run**.

    :::image type="content" source="./media/how-to-monitor-online-endpoints/query-results.png" alt-text="Screenshots of the results after running a query.":::

### Example queries

You can find example queries on the __Queries__ tab while viewing logs. Search for __Online endpoint__ to find example queries.

:::image type="content" source="./media/how-to-monitor-online-endpoints/example-queries.png" alt-text="Screenshot of the example queries.":::

### Log column details 

The following tables provide details on the data stored in each log:

**AMLOnlineEndpointTrafficLog** (preview)

| Field name | Description |
| ---- | ---- |
| Method | The requested method from client. 
| Path | The requested path from client. 
| SubscriptionId | The machine learning subscription ID of the online endpoint. 
| WorkspaceId | The machine learning workspace ID of the online endpoint. 
| EndpointName | The name of the online endpoint. 
| DeploymentName | The name of the online deployment. 
| Protocol | The protocol of the request. 
| ResponseCode | The final response code returned to the client. 
| ResponseCodeReason | The final response code reason returned to the client. 
| ModelStatusCode | The response status code from model. 
| ModelStatusReason | The response status reason from model. 
| RequestPayloadSize | The total bytes received from the client. 
| ResponsePayloadSize | The total bytes sent back to the client. 
| UserAgent | The user-agent header of the request. 
| XRequestId | The request ID generated by Azure Machine Learning for internal tracing. 
| XMSClientRequestId | The tracking ID generated by the client. 
| TotalDurationMs | Duration in milliseconds from the request start time to the last response byte sent back to the client. If the client disconnected, it measures from the start time to client disconnect time. 
| RequestDurationMs | Duration in milliseconds from the request start time to the last byte of the request received from the client. 
| ResponseDurationMs | Duration in milliseconds from the request start time to the first response byte read from the model. 
| RequestThrottlingDelayMs | Delay in milliseconds in request data transfer due to network throttling. 
| ResponseThrottlingDelayMs | Delay in milliseconds in response data transfer due to network throttling. 

**AMLOnlineEndpointConsoleLog**

| Field Name | Description |
| ----- | ----- |
